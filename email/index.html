<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <title>HAD Tester</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="bootstrap/docs/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/~slg/jumbotron.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="../nist_logo_reverse.svg" height=12x> DANE-TEST.HAD.DNSOPS.GOV</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <!--
          <form class="navbar-form navbar-right">
            <div class="form-group">
              <input type="text" placeholder="Email" class="form-control">
            </div>
            <div class="form-group">
              <input type="password" placeholder="Password" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">Sign in</button>
          </form> -->

        </div><!--/.navbar-collapse -->
      </div>
    </nav>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>Email Tester</h1>
          <p>To register, send an email message to <a href='mailto:register@dane-test.had.dnsops.gov'>dane-test.had.dnsops.gov</a></p>
        <!-- <p><a class="btn btn-primary btn-lg" href="#"
        role="button">Learn more »</a></p> -->
      </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-md-4">
          <h2>Unencrypted</h2>
          <p>Send yourself a plain message. This feature tests your
          ability to receive email from this tester.</p>

          <form class="mailForm" id="form1" action='sendmail.cgi'>
            <label for="email">Your Email</label>    <input type="text" id="email" name="email"/><br/>
            <label for="hash">Your Hash</label>      <input type="text" id="hash" name="hash"/><br/>
            <label for="sigmode">Select Signature Mode(s):</label></br>
            <input type="checkbox" name="none" value="none"> No signature<br/>
            <input type="checkbox" name="pgp"  value="pgp">  OpenPGP<br/>
            <input type="checkbox" name="smime" value="smime"> S/MIME<br/>
            <input type="submit" value="Send Mail"><br/>
           <span class="status"></span>
          </form>
          <p></p>
          <p><a class="btn btn-default viewDetails" href="#" role="button" id='getplain-details' form='form1'>View details »</a></p>
        </div>
        <div class="col-md-4">
          <h2>SMIMEA</h2>
          <p>Send yourself an SMIME-encrypted message, finding the
          key with the <a href='https://tools.ietf.org/html/draft-ietf-dane-smime-10'>SMIMEA Resource Record</a></p>
          <form class="mailForm" id="form2" action='sendmail.cgi'>
            <label for="email">Your Email</label>    <input type="text" id="email" name="email"/><br/>
            <label for="hash">Your Hash</label>      <input type="text" id="hash" name="hash"/><br/>
            <label for="sigmode">Select Signature Mode(s):</label></br>
            <input type="checkbox" name="none" value="none"> No signature<br/>
            <input type="checkbox" name="smime" value="smime"> S/MIME<br/>
            <input type="submit" value="Send Mail"><br/>
           <span class="status"></span>
          </form>
          <p></p>
          <p><a class="btn btn-default viewDetails" href="#" role="button" form='form2'>View details »</a></p>
        </div>
        <div class="col-md-4">
          <h2>OpenPGP</h2>
          <p>Send yourself an an OpenPGP-encrypted message, finding the
          key with the <a href='https://tools.ietf.org/html/draft-ietf-dane-openpgpkey-08'>OPENPGPKEY Resource Record</a></p>
          <form class="mailForm" id="form3" action='sendmail.cgi'>
            <label for="email">Your Email</label>    <input type="text" id="email" name="email"/><br/>
            <label for="hash">Your Hash</label>      <input type="text" id="hash" name="hash"/><br/>
            <label for="sigmode">Select Signature Mode(s):</label></br>
            <input type="checkbox" name="pgp"  value="pgp">  OpenPGP<br/>
            <input type="checkbox" name="smime" value="smime"> S/MIME<br/>
            <input type="submit" value="Send Mail"><br/>
           <span class="status"></span>
          </form>
          <p></p>


          <p><a class="btn btn-default viewDetails" href="#" role="button" form='form3'>View details »</a></p>
        </div>
      </div> <!-- row -->
      <div class="row">
        <div class="col-md-4">
          <h2>Lookup</h2>
          <p>Enter an email address and we will look up SMIMEA and
          OPENPGPKEY records.</p>

          <form class="statusForm" method=GET action="lookup_email.cgi">
            <label for="email">Email</label> <input type="text" id="email" name="email" size=30/><br/>
            <label for="hash">Hash</label> <input type="text" id="hash" name="hash" size=20/> (optional)<br/>
            <br/>
            <input type="submit" value="Lookup" ><br/>
          </form>
        </div>


        <div class="col-md-4">
          <h2>History</h2>
          <p>Provide history of interaction with this server.</p>

          <form class="statusForm" method=GET action="history.cgi">
            <label for="hash">Hash</label> <input type="text" id="hash" name="hash" size=15/><br/>
            <br/>
            <input type="submit" value="Lookup" ><br/>
          </form>
        </div>


      </div> <!-- row -->


      <div class="container">
          <span id="form-lookup-status"></span>
      </div>

     <hr>

    <footer>
        <p id='author'> <a href='https://www.nist.gov/itl/antd/'>Advanced
            Network Technologies
            Division</a>, <a href='https://www.nist.gov/'>National
            Institute of Standards and Technology</a>.
        </p> 
    </footer>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="bootstrap/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/docs/assets/js/ie10-viewport-bug-workaround.js"></script>

    <script>

//
// Wire up the forms and make them work.
//

$(document).ready(function(){
    // hide the forms that are revealed by the toggle buttons
    $(".mailForm").hide();
    
    // Implement the toggle buttons to view/hide details
    $(".viewDetails").click(function(){
        $("#" + $(this).attr("form")).toggle();
        $("#" + $(this).attr("form")).find(".status").text("");  // clear the status
        if ( $(this).text()=="View details »" ) {
            $(this).text("Hide details »"); 
        } else {
            $(this).text("View details »");
        }
    });
    
    // Send the mail
    $(".mailForm").submit( function(event) {
        var status = $(this).find('.status');
        status.text("working..."); // clear the status
        $.ajax({                       // create an AJAX call...
            data: $(this).serialize(), // get the form data from the form and send it
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            success: function(response) {
                status.html(response);
            }
        });
        
        return false; // cancel original event to prevent submitting
    });
    
    // A status form puts the results in the status section
    $(".statusForm").submit(function(event) {
        var status = $("#form-lookup-status");
        status.text("");               // clear the staus
        $.ajax({                       // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            success: function(response) {
                status.html(response);
            }
        });
        return false; // cancel original event to prevent form submitting
    });

    

});
    </script>
  </body>
</html>
    
